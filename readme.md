# Walkthrough of k8s and ArgoCD functionality

 - Creates local k8s cluster into Docker (kind)
 - Deploys ArgoCD operator into it
 - Sets up ArgoCD to maintain/update itself as a ArgoApp against a community maintained chart's fixed version *only for development enviroments
 - Deploys Strimzy Kafka operator via Argo 
 - Deploys a Strimzy Kafka cluster, topic and user custom helm chart via Argo

## Dependencys

 - Docker desktop (Running! Kind installs k8s cluster into docker.) https://docs.docker.com/get-docker/ 
 - kubectl https://kubernetes.io/docs/reference/kubectl/ 
 - kind https://kind.sigs.k8s.io/ 
 - helm https://helm.sh/
 - k9s (reccomended) - https://github.com/derailed/k9s 

## Setup dependencys on osx with homebrew

* All of the dependencys are multiplatform and can be used on osx, linux and windows, but not via homebrew

`brew cask install docker`

`brew install kubectl kind helm k9s`

`helm repo add argo https://argoproj.github.io/argo-helm`

# Quick guide

1. Install dependencys, ensure docker desktop is up and running
2. Create a git repo, change creds in repo-and-app.yaml accoringly. In case of HTTPS auth and access token you only need to change url and token. * not required if you don't care about its gitops functionality yet
3. Push the testapp chart template to git (to have a demo app to deploy), it was generated by `helm create testapp` * or just leave it to pull from my repo
4. run ./local-cluster.sh and follow instructions
5. press sync in ArgoCD testapp to deploy the test application
6. Commit a change to the testapp repository and see ArgoCD pick it up, diff is nice

# For kafka
1. Sync Strimzy operator
2. Sync kafka cluster, user and topic

If you want to see the full helm config options (limited in the default helm chart if not forked) you can download the chart via `helm pull argo/argo-cd --version 4.5.0`
